"use strict";(self.webpackChunkdesafio_mb_web=self.webpackChunkdesafio_mb_web||[]).push([[227],{875:(e,t,a)=>{a.d(t,{A:()=>r});const n={buttonstyled:"styles_buttonstyled__4b+TJ"};var o=a(579);function r(e){let{message:t,onClose:a,onClickRegistrarUsuario:r,tryAgainButton:i}=e;return(0,o.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center",children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg max-w-sm",children:[(0,o.jsx)("p",{className:"text-gray-800",children:t}),(0,o.jsxs)("div",{className:"flex justify-end space-x-4 mt-4",children:[i&&(0,o.jsx)("button",{onClick:r,className:"".concat(n.buttonstyled,' px-4 py-2 text-white rounded transition-colors"'),children:"Tentar novamente"}),(0,o.jsx)("button",{onClick:()=>{a()},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-700 transition-colors",children:"Fechar"})]})]})})}},151:(e,t,a)=>{a.d(t,{A:()=>i});const n={contiuarbutton:"dynamic-button_contiuarbutton__rwNgg",voltarbutton:"dynamic-button_voltarbutton__lXrax",disabled:"dynamic-button_disabled__CX2Ge"};var o=a(216),r=a(579);function i(e){let{to:t,label:a,buttonWidth:i,disableButton:s,onClickRegistrarUsuario:l}=e;const c=(0,o.Zp)();t="/"+t;return(0,r.jsx)("button",{style:{width:i||"100%"},onClick:s||"Voltar"===a?()=>{"Voltar"===a?c(-1):"Cadastrar"===a&&l?l():c(t)}:void 0,className:"".concat("Voltar"===a?n.voltarbutton:n.contiuarbutton,"\n        ").concat(!s&&"Voltar"!==a&&n.disabled,"\n        inline-block px-4 py-2 text-white font-semibold text-sm rounded-lg shadow-md \n        focus:outline-none focus:ring-2 focus:ring-opacity-75"),disabled:!s&&"Voltar"!==a,children:a})}},987:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(43),o=a(238),r=a(519);const i=/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/;function s(e,t){switch(e){case o.V.email:return function(e){return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":r.i.emailInvalido:r.i.campoObrigatorio}(t);case o.V.password:return function(e){return e?e.length<6?r.i.senhaInvalida:void 0:r.i.campoObrigatorio}(t);case o.V.cpf:return function(e){const t=e.replace(/[^\d]+/g,"");if(!e)return r.i.campoObrigatorio;if(""===t)return r.i.campoObrigatorio;if(11!==t.length)return r.i.cpfInvalido;if("00000000000"===t||"11111111111"===t||"22222222222"===t||"33333333333"===t||"44444444444"===t||"55555555555"===t||"66666666666"===t||"77777777777"===t||"88888888888"===t||"99999999999"===t)return r.i.cpfInvalido;let a=0;for(let o=0;o<9;o++)a+=parseInt(t.charAt(o))*(10-o);let n=11-a%11;if(10!==n&&11!==n||(n=0),n!==parseInt(t.charAt(9)))return r.i.cpfInvalido;a=0;for(let o=0;o<10;o++)a+=parseInt(t.charAt(o))*(11-o);return n=11-a%11,10!==n&&11!==n||(n=0),n!==parseInt(t.charAt(10))?r.i.cpfInvalido:""}(t);case o.V.nome:return function(e){return e?e.length<3?r.i.nomeInvalido:"":r.i.campoObrigatorio}(t);case o.V.dataNascimento:return function(e){return e?/^\d{2}\/\d{2}\/\d{4}$/.test(e)?"":r.i.dataNascimentoInvalida:r.i.campoObrigatorio}(t);case o.V.telefone:return function(e){return e?/^\(\d{2}\) \d{4}-\d{5}$/.test(e)?"":r.i.telefoneInvalido:r.i.campoObrigatorio}(t);case o.V.razaoSocial:return function(e){return e?"":r.i.campoObrigatorio}(t);case o.V.cnpj:return function(e){return e?i.test(e)?"":r.i.cnpjInvalido:r.i.campoObrigatorio}(t);case o.V.dataAbertura:return function(e){return e?/^\d{2}\/\d{2}\/\d{4}$/.test(e)?"":r.i.dataNascimentoInvalida:r.i.campoObrigatorio}(t);default:return}}function l(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1")}var c=a(722),u=a(579);function d(e){let{inputType:t,idInput:a,labelInput:r,maxLenghtProp:i,setDynamicAlertMessage:d,inputValue:p,onChangeInputValue:m}=e;const[b,f]=(0,n.useState)(""),[g,v]=(0,n.useState)(t),h=(0,n.useCallback)((e=>{const t=s(a,e)||"";b!==t&&(f(t),d&&d(a,t))}),[a,b,d]);(0,n.useEffect)((()=>{h(p)}),[p,h]);return(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:r}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)("input",{onBlur:e=>h(e.target.value),onChange:e=>{m(e),h(e.target.value)},onKeyUp:e=>{const t=function(e,t){switch(e){case o.V.cpf:return function(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")}(t);case o.V.dataNascimento:case o.V.dataAbertura:return l(t);case o.V.telefone:return function(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(\d{4})(\d{1,4})$/,"$1$2")}(t);case o.V.cnpj:return function(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2")}(t);default:return t}}(a,e.currentTarget.value);e.currentTarget.value=t,h(t)},maxLength:i,value:p,type:g,id:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),"password"===a&&(0,u.jsx)("button",{type:"button",onClick:()=>{v("password"===g?"text":"password")},className:"ml-2 px-2 py-2 bg-blue-500 text-white font-bold rounded hover:bg-blue-700 transition duration-300",children:"password"===g?"Mostrar":"Ocultar"})]}),b&&(0,u.jsx)(c.A,{alertMessage:b})]})}},722:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(579);function o(e){let{alertMessage:t}=e;return(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-red-500 text-xs italic",children:t})})}},682:(e,t,a)=>{a.d(t,{A:()=>r});const n={stepper:"stepper_stepper__Hul3+",steplabel:"stepper_steplabel__evQnm"};var o=a(579);function r(e){let{activeStep:t,maxStep:a,labelStep:r}=e;return(0,o.jsxs)("div",{role:"stepper","aria-valuenow":parseInt(t),"aria-valuemin":1,"aria-valuemax":parseInt(a),"aria-label":"Etapa ".concat(t," de ").concat(a),className:n.progress,children:[(0,o.jsx)("div",{children:(0,o.jsxs)("span",{className:n.steplabel,"aria-live":"polite","aria-atomic":"true",children:["Etapa ",(0,o.jsx)("span",{children:t})," de ",a]})}),(0,o.jsx)("h1",{"aria-live":"polite",children:r})]})}},519:(e,t,a)=>{a.d(t,{i:()=>n});let n=function(e){return e.nomeInvalido="Nome inv\xe1lido",e.senhaInvalida="Senha deve ser maior ou igual a 6 caracteres",e.emailInvalido="E-mail inv\xe1lido",e.cpfInvalido="CPF inv\xe1lido",e.cnpjInvalido="CNPJ inv\xe1lido",e.dataNascimentoInvalida="Data de nascimento inv\xe1lida",e.telefoneInvalido="Telefone inv\xe1lido",e.campoObrigatorio="Campo obrigat\xf3rio",e}({})},599:(e,t,a)=>{a.d(t,{$:()=>n});let n=function(e){return e.voltarButton="40%",e.continuarButton="50%",e}({})},238:(e,t,a)=>{a.d(t,{V:()=>n});let n=function(e){return e.dataNascimento="dataNascimento",e.email="email",e.nome="nome",e.password="password",e.telefone="telefone",e.cpf="cpf",e.razaoSocial="razaoSocial",e.cnpj="cnpj",e.dataAbertura="dataAbertura",e}({})},980:(e,t,a)=>{a.d(t,{O:()=>r});var n=a(43),o=a(81);const r=()=>{const e=n.useContext(o.A);if(void 0===e)throw new Error("useFormData must be used within a FormDataProvider");return e}},227:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(43),o=a(151),r=a(987),i=a(682),s=a(599),l=a(238),c=a(980),u=a(907),d=a(569),p=a(875),m=a(577),b=a(216),f=a(579);function g(){var e,t;const{formData:a,setFormData:g}=(0,c.O)(),[v,h]=(0,n.useState)(!1),[x,y]=(0,n.useState)({}),I=(0,b.Zp)();a.accountType||I("/registration");const j=(0,u.useMutation)(d.A,{onSuccess:e=>{console.log("Registration successful",e),h(!0)},onError:e=>{console.error("Registration failed",e),h(!0)}}),$=[{idInput:l.V.email,labelInput:"Endere\xe7o de e-mail",inputType:"email",maxLenghtProp:50},{idInput:l.V.nome,labelInput:"Nome",inputType:"text",maxLenghtProp:50},{idInput:l.V.cpf,labelInput:"CPF",inputType:"text",maxLenghtProp:14},{idInput:l.V.dataNascimento,labelInput:"Data de Nascimento",inputType:"text",maxLenghtProp:10},{idInput:l.V.telefone,labelInput:"Telefone",inputType:"text",maxLenghtProp:15},{idInput:l.V.password,labelInput:"Sua senha",inputType:"password",maxLenghtProp:50}],w=(e,t)=>{y((a=>({...a,[e]:t})))},A=!Object.values(x).some((e=>""!==e)),N=()=>{const e={nome:a.nome,email:a.email,cpf:a.cpf,dataNascimento:a.dataNascimento,telefone:a.telefone,password:a.password,accountType:a.accountType};j.mutate(e)},V=j.error,C=400===(null===V||void 0===V||null===(e=V.response)||void 0===e?void 0:e.status)?"Ops, todos os campos s\xe3o obrigat\xf3rios":j.isSuccess?"Cadastro realizado com sucesso":"Ocorreu um erro ao salvar o formul\xe1rio";return(0,f.jsxs)("div",{children:[(0,f.jsx)(i.A,{activeStep:"4",maxStep:"4",labelStep:"Revise suas informa\xe7\xf5es"}),$.map(((e,t)=>(0,f.jsx)(r.A,{idInput:e.idInput,labelInput:e.labelInput,inputType:e.inputType,setDynamicAlertMessage:w,maxLenghtProp:e.maxLenghtProp,inputValue:a[e.idInput]||"",onChangeInputValue:t=>((e,t)=>{const a=t.target.value;g((t=>({...t,[e]:a})))})(e.idInput,t)},"form-pf-input-".concat(e.idInput,"-").concat(t)))),(0,f.jsx)(o.A,{label:"Voltar",buttonWidth:s.$.voltarButton}),(0,f.jsx)(o.A,{label:"Cadastrar",to:"",buttonWidth:s.$.continuarButton,disableButton:A,onClickRegistrarUsuario:N}),j.isLoading&&(0,f.jsx)(m.A,{}),v?(0,f.jsx)(p.A,{message:C,onClose:()=>{h(!1)},onClickRegistrarUsuario:N,tryAgainButton:!(400===(null===V||void 0===V||null===(t=V.response)||void 0===t?void 0:t.status)||j.isSuccess)}):null]})}},569:(e,t,a)=>{a.d(t,{A:()=>r});const n=a(213).A.create({baseURL:"http://localhost:3002",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}});n.interceptors.response.use((e=>e),(async e=>{var t;const a=e.config;return 401!==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)||null!==a&&void 0!==a&&a.__isRetryRequest?Promise.reject(e):(a.retry=!0,a.__isRetryRequest=!0,n(a))}));const o=n,r=async e=>{const{data:t}=await o.post("registration",e);return t}}}]);
//# sourceMappingURL=227.eb34249f.chunk.js.map