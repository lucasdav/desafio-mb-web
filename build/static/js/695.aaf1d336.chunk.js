"use strict";(self.webpackChunkdesafio_mb_web=self.webpackChunkdesafio_mb_web||[]).push([[695],{875:(e,t,a)=>{a.d(t,{A:()=>o});const n={buttonstyled:"styles_buttonstyled__4b+TJ"};var r=a(579);function o(e){let{message:t,onClose:a,onClickRegistrarUsuario:o,tryAgainButton:i}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center",children:(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg max-w-sm",children:[(0,r.jsx)("p",{className:"text-gray-800",children:t}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 mt-4",children:[i&&(0,r.jsx)("button",{onClick:o,className:"".concat(n.buttonstyled,' px-4 py-2 text-white rounded transition-colors"'),children:"Tentar novamente"}),(0,r.jsx)("button",{onClick:()=>{a()},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-700 transition-colors",children:"Fechar"})]})]})})}},151:(e,t,a)=>{a.d(t,{A:()=>i});const n={contiuarbutton:"dynamic-button_contiuarbutton__rwNgg",voltarbutton:"dynamic-button_voltarbutton__lXrax",disabled:"dynamic-button_disabled__CX2Ge"};var r=a(216),o=a(579);function i(e){let{to:t,label:a,buttonWidth:i,disableButton:s,onClickRegistrarUsuario:l}=e;const c=(0,r.Zp)();t="/"+t;return(0,o.jsx)("button",{style:{width:i||"100%"},onClick:s||"Voltar"===a?()=>{"Voltar"===a?c(-1):"Cadastrar"===a&&l?l():c(t)}:void 0,className:"".concat("Voltar"===a?n.voltarbutton:n.contiuarbutton,"\n        ").concat(!s&&"Voltar"!==a&&n.disabled,"\n        inline-block px-4 py-2 text-white font-semibold text-sm rounded-lg shadow-md \n        focus:outline-none focus:ring-2 focus:ring-opacity-75"),disabled:!s&&"Voltar"!==a,children:a})}},987:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(43),r=a(238),o=a(519);const i=/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/;function s(e,t){switch(e){case r.V.email:return function(e){return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":o.i.emailInvalido:o.i.campoObrigatorio}(t);case r.V.password:return function(e){return e?e.length<6?o.i.senhaInvalida:void 0:o.i.campoObrigatorio}(t);case r.V.cpf:return function(e){const t=e.replace(/[^\d]+/g,"");if(!e)return o.i.campoObrigatorio;if(""===t)return o.i.campoObrigatorio;if(11!==t.length)return o.i.cpfInvalido;if("00000000000"===t||"11111111111"===t||"22222222222"===t||"33333333333"===t||"44444444444"===t||"55555555555"===t||"66666666666"===t||"77777777777"===t||"88888888888"===t||"99999999999"===t)return o.i.cpfInvalido;let a=0;for(let r=0;r<9;r++)a+=parseInt(t.charAt(r))*(10-r);let n=11-a%11;if(10!==n&&11!==n||(n=0),n!==parseInt(t.charAt(9)))return o.i.cpfInvalido;a=0;for(let r=0;r<10;r++)a+=parseInt(t.charAt(r))*(11-r);return n=11-a%11,10!==n&&11!==n||(n=0),n!==parseInt(t.charAt(10))?o.i.cpfInvalido:""}(t);case r.V.nome:return function(e){return e?e.length<3?o.i.nomeInvalido:"":o.i.campoObrigatorio}(t);case r.V.dataNascimento:return function(e){return e?/^\d{2}\/\d{2}\/\d{4}$/.test(e)?"":o.i.dataNascimentoInvalida:o.i.campoObrigatorio}(t);case r.V.telefone:return function(e){return e?/^\(\d{2}\) \d{4}-\d{5}$/.test(e)?"":o.i.telefoneInvalido:o.i.campoObrigatorio}(t);case r.V.razaoSocial:return function(e){return e?"":o.i.campoObrigatorio}(t);case r.V.cnpj:return function(e){return e?i.test(e)?"":o.i.cnpjInvalido:o.i.campoObrigatorio}(t);case r.V.dataAbertura:return function(e){return e?/^\d{2}\/\d{2}\/\d{4}$/.test(e)?"":o.i.dataNascimentoInvalida:o.i.campoObrigatorio}(t);default:return}}function l(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1")}var c=a(722),u=a(579);function d(e){let{inputType:t,idInput:a,labelInput:o,maxLenghtProp:i,setDynamicAlertMessage:d,inputValue:p,onChangeInputValue:m}=e;const[b,f]=(0,n.useState)(""),[v,g]=(0,n.useState)(t),h=(0,n.useCallback)((e=>{const t=s(a,e)||"";b!==t&&(f(t),d&&d(a,t))}),[a,b,d]);(0,n.useEffect)((()=>{h(p)}),[p,h]);return(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:o}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)("input",{onBlur:e=>h(e.target.value),onChange:e=>{m(e),h(e.target.value)},onKeyUp:e=>{const t=function(e,t){switch(e){case r.V.cpf:return function(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")}(t);case r.V.dataNascimento:case r.V.dataAbertura:return l(t);case r.V.telefone:return function(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(\d{4})(\d{1,4})$/,"$1$2")}(t);case r.V.cnpj:return function(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2")}(t);default:return t}}(a,e.currentTarget.value);e.currentTarget.value=t,h(t)},maxLength:i,value:p,type:v,id:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),"password"===a&&(0,u.jsx)("button",{type:"button",onClick:()=>{g("password"===v?"text":"password")},className:"ml-2 px-2 py-2 bg-blue-500 text-white font-bold rounded hover:bg-blue-700 transition duration-300",children:"password"===v?"Mostrar":"Ocultar"})]}),b&&(0,u.jsx)(c.A,{alertMessage:b})]})}},722:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(579);function r(e){let{alertMessage:t}=e;return(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-red-500 text-xs italic",children:t})})}},682:(e,t,a)=>{a.d(t,{A:()=>o});const n={stepper:"stepper_stepper__Hul3+",steplabel:"stepper_steplabel__evQnm"};var r=a(579);function o(e){let{activeStep:t,maxStep:a,labelStep:o}=e;return(0,r.jsxs)("div",{role:"stepper","aria-valuenow":parseInt(t),"aria-valuemin":1,"aria-valuemax":parseInt(a),"aria-label":"Etapa ".concat(t," de ").concat(a),className:n.progress,children:[(0,r.jsx)("div",{children:(0,r.jsxs)("span",{className:n.steplabel,"aria-live":"polite","aria-atomic":"true",children:["Etapa ",(0,r.jsx)("span",{children:t})," de ",a]})}),(0,r.jsx)("h1",{"aria-live":"polite",children:o})]})}},519:(e,t,a)=>{a.d(t,{i:()=>n});let n=function(e){return e.nomeInvalido="Nome inv\xe1lido",e.senhaInvalida="Senha deve ser maior ou igual a 6 caracteres",e.emailInvalido="E-mail inv\xe1lido",e.cpfInvalido="CPF inv\xe1lido",e.cnpjInvalido="CNPJ inv\xe1lido",e.dataNascimentoInvalida="Data de nascimento inv\xe1lida",e.telefoneInvalido="Telefone inv\xe1lido",e.campoObrigatorio="Campo obrigat\xf3rio",e}({})},599:(e,t,a)=>{a.d(t,{$:()=>n});let n=function(e){return e.voltarButton="40%",e.continuarButton="50%",e}({})},238:(e,t,a)=>{a.d(t,{V:()=>n});let n=function(e){return e.dataNascimento="dataNascimento",e.email="email",e.nome="nome",e.password="password",e.telefone="telefone",e.cpf="cpf",e.razaoSocial="razaoSocial",e.cnpj="cnpj",e.dataAbertura="dataAbertura",e}({})},980:(e,t,a)=>{a.d(t,{O:()=>o});var n=a(43),r=a(81);const o=()=>{const e=n.useContext(r.A);if(void 0===e)throw new Error("useFormData must be used within a FormDataProvider");return e}},695:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(43),r=a(151),o=a(987),i=a(682),s=a(599),l=a(238),c=a(980),u=a(907),d=a(569),p=a(875),m=a(577),b=a(579);function f(){var e,t;const{formData:a,setFormData:f}=(0,c.O)(),[v,g]=(0,n.useState)({}),[h,x]=(0,n.useState)(!1),I=(0,u.useMutation)(d.A,{onSuccess:e=>{console.log("Cadastro efetuado com sucesso",e),x(!0)},onError:e=>{console.error("Ocorreu um erro ao salvar o formul\xe1rio",e),x(!0)}}),y=[{idInput:l.V.email,labelInput:"Endere\xe7o de email",inputType:"email",maxLenghtProp:50},{idInput:l.V.razaoSocial,labelInput:"Raz\xe3o social",inputType:"text",maxLenghtProp:50},{idInput:l.V.cnpj,labelInput:"CNPJ",inputType:"text",maxLenghtProp:18},{idInput:l.V.dataAbertura,labelInput:"Data de abertura",inputType:"text",maxLenghtProp:10},{idInput:l.V.telefone,labelInput:"Telefone",inputType:"text",maxLenghtProp:15},{idInput:l.V.password,labelInput:"Sua senha",inputType:"password",maxLenghtProp:50}],j=(e,t)=>{g((a=>({...a,[e]:t})))},$=!Object.values(v).some((e=>""!==e)),w=()=>{const e={razaoSocial:a.razaoSocial,email:a.email,cnpj:a.cnpj,dataAbertura:a.dataAbertura,telefone:a.telefone,password:a.password,accountType:a.accountType};I.mutate(e)},A=I.error,V=400===(null===A||void 0===A||null===(e=A.response)||void 0===e?void 0:e.status)?"Ops, todos os campos s\xe3o obrigat\xf3rios":I.isSuccess?"Cadastro realizado com sucesso":"Ocorreu um erro ao salvar o formul\xe1rio";return(0,b.jsxs)("div",{children:[(0,b.jsx)(i.A,{activeStep:"4",maxStep:"4",labelStep:"Revise suas informa\xe7\xf5es"}),y.map(((e,t)=>(0,b.jsx)(o.A,{idInput:e.idInput,labelInput:e.labelInput,inputType:e.inputType,setDynamicAlertMessage:j,maxLenghtProp:e.maxLenghtProp,inputValue:a[e.idInput]||"",onChangeInputValue:t=>((e,t)=>{const a=t.target.value;f((t=>({...t,[e]:a})))})(e.idInput,t)},"form-pf-input-".concat(e.idInput,"-").concat(t)))),(0,b.jsx)(r.A,{label:"Voltar",buttonWidth:s.$.voltarButton}),(0,b.jsx)(r.A,{label:"Cadastrar",to:"",buttonWidth:s.$.continuarButton,disableButton:$,onClickRegistrarUsuario:w}),I.isLoading&&(0,b.jsx)(m.A,{}),h?(0,b.jsx)(p.A,{message:V,onClose:()=>{x(!1)},onClickRegistrarUsuario:w,tryAgainButton:!(400===(null===A||void 0===A||null===(t=A.response)||void 0===t?void 0:t.status)||I.isSuccess)}):null]})}},569:(e,t,a)=>{a.d(t,{A:()=>o});const n=a(213).A.create({baseURL:"http://localhost:3002",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}});n.interceptors.response.use((e=>e),(async e=>{var t;const a=e.config;return 401!==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)||null!==a&&void 0!==a&&a.__isRetryRequest?Promise.reject(e):(a.retry=!0,a.__isRetryRequest=!0,n(a))}));const r=n,o=async e=>{const{data:t}=await r.post("registration",e);return t}}}]);
//# sourceMappingURL=695.aaf1d336.chunk.js.map